{"version":3,"sources":["webpack:///./src/components/MapContainer.vue?10a6","webpack:///./src/components/MapContainer.vue?221f","webpack:///./src/components/MapContainer.vue","webpack:///./src/components/FilterContainer.vue?03e6","webpack:///./src/components/FilterContainer.vue?cc4e","webpack:///./src/components/FilterContainer.vue","webpack:///./src/App.vue?eb80","webpack:///./src/App.vue?7147","webpack:///./src/App.vue","webpack:///./src/main.ts"],"names":["_debounce","__webpack_require__","MapContainer","vue_runtime_esm","extend","name","props","data","geojsonData","zoom","undefined","zoomScale","created","this","features","type","fetch","geojsonFile","_context","sent","can_ndjson_stream_default","body","fileStream","reader","getReader","mapPaths","document","getElementById","read","result","done","newPath","createElementNS","setAttributeNS","String","pathFunction","value","geometry","appendChild","mounted","panzoom_default","maxZoom","minZoom","beforeWheel","_this","setZoomScale","map","addEventListener","methods","getTransform","scale","computed","Object","d3_geo","projection","center","translate","$el","clientWidth","clientHeight","emojiSize","d3_scale","domain","range","vehicleStyle","font-size","concat","MapContainer_render","_vm","_h","$createElement","_c","_self","attrs","id","style","_l","vehicle","checkedValues","length","includes","properties","routeTag","class","Number","parseInt","x","coordinates","y","route","_v","_s","_e","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","component_normalizer","components_MapContainer","FilterContainer","idString","resetChecked","Array","from","querySelectorAll","forEach","element","checked","watch","newVal","oldVal","$emit","FilterContainer_render","on","click","index","staticClass","directives","rawName","expression","domProps","isArray","_i","change","$event","$$a","$$el","target","$$c","$$v","$$i","slice","for","FilterContainer_staticRenderFns","FilterContainer_injectStyle","FilterContainer___vue_template_functional__","FilterContainer___vue_styles__","FilterContainer___vue_scopeId__","FilterContainer___vue_module_identifier__","FilterContainer_Component","components_FilterContainer","App","components","vehicleData","getvehicleData","window","setInterval","allRoutes","i","push","sort","firstRun","arguments","Date","now","vehicleRequest","_context2","json","vehicleJSON","currentIds","d","updatingIndex","findIndex","updatevehicle","getvehicleObject","_loop","lon","lat","secsSinceReport","speedKmHr","heading","set","App_render","this$1","val","App_staticRenderFns","App_injectStyle","App___vue_template_functional__","App___vue_styles__","App___vue_scopeId__","App___vue_module_identifier__","App_Component","src_App","config","productionTip","render","h","$mount"],"mappings":"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","file":"js/app.840d1295.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\"\nimport { geoPath, geoMercator } from 'd3-geo'\nimport { scaleLog } from 'd3-scale'\nimport panzoom from 'panzoom'\nconst _debounce = require('lodash.debounce')\nimport ndjsonStream from 'can-ndjson-stream';\n\nexport default Vue.extend({\n  name: \"MapContainer\",\n  props: ['vehicleData', 'checkedValues'],\n  data() {\n    return {\n      geojsonData: {},\n      zoom: undefined,\n      zoomScale: undefined\n    }\n  },\n  async created () {\n    // get the map file\n    this.geojsonData.features = []\n    this.geojsonData.type = \"FeatureCollection\"\n    const geojsonFile = await fetch(\"./all.ndjson\")\n    const fileStream = await ndjsonStream(geojsonFile.body)\n    const reader = fileStream.getReader();\n    const mapPaths = document.getElementById('mapPaths')\n    while(true){\n      const result = await reader.read()\n      if (result.done) { break }\n      const newPath = document.createElementNS('http://www.w3.org/2000/svg','path')\n      newPath.setAttributeNS(null, 'd', String(this.pathFunction(result.value)))\n      newPath.setAttributeNS(null, 'type', result.value.geometry.type)\n      mapPaths.appendChild(newPath)\n    }\n  },\n  mounted() {\n    // handle zooming\n    this.zoom = panzoom(document.getElementById('panZoomRoot'), {\n      maxZoom: 10,\n      minZoom: 1,\n      beforeWheel: _debounce(()=>{this.setZoomScale()}, 60)\n    })\n    this.setZoomScale()\n    const map = document.getElementById('map')\n    map.addEventListener('dblclick', this.setZoomScale)\n    map.addEventListener('touchstart', _debounce(()=>{this.setZoomScale()}, 60))\n    map.addEventListener('keydown', _debounce(()=>{this.setZoomScale()}, 60))\n  },\n  methods: {\n    setZoomScale () {\n      this.zoomScale = this.zoom.getTransform().scale\n    }\n  },\n  computed: {\n    pathFunction() {\n      return geoPath(this.projection)\n    },\n    projection () {\n      return geoMercator()\n        .scale(306337.6140209504)\n        .center([-122.43595722806097, 37.77071992617303]) //projection center\n        .translate([this.$el.clientWidth / 2, this.$el.clientHeight / 2])\n    },\n    emojiSize () {\n      return scaleLog().domain([1,10]).range([12,2])\n    },\n    vehicleStyle () {\n      if (this.zoom === undefined) return '15px'\n      return {\n        'font-size': `${this.emojiSize(this.zoomScale)}px` \n      }\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MapContainer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"id\":\"map\"}},[_c('g',{attrs:{\"id\":\"panZoomRoot\"}},[_c('g',{attrs:{\"id\":\"mapPaths\"}}),_c('g',{style:(_vm.vehicleStyle)},[_vm._l((_vm.vehicleData),function(vehicle){return [(_vm.checkedValues.length === 0 || _vm.checkedValues.includes(vehicle.properties.routeTag))?[_c('text',{class:Number.parseInt(vehicle.properties.routeTag) ? 'bus' : 'trolley',attrs:{\"x\":_vm.projection(vehicle.coordinates)[0],\"y\":_vm.projection(vehicle.coordinates)[1],\"route\":vehicle.properties.routeTag}},[_vm._v(_vm._s(Number.parseInt(vehicle.properties.routeTag) ? 'ðŸšŒ' : 'ðŸš‹'))])]:_vm._e()]})],2)])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f1813fbc\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MapContainer.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MapContainer.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapContainer.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapContainer.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1813fbc\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MapContainer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MapContainer.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\"\n\nexport default Vue.extend({\n  name: \"FilterContainer\",\n  props: ['allRoutes'],\n  data () {\n    return {\n      checkedValues: []\n    }\n  },\n  methods: {\n    idString (id) {\n      return `route-${id}`\n    },\n    resetChecked () {\n      this.checkedValues = []\n      Array.from(document.querySelectorAll('input[type=checkbox]')).forEach(element => {\n        element.checked = false\n      });\n    }\n  },\n  watch: {\n    checkedValues (newVal, oldVal) {\n      this.$emit('change', newVal)\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/FilterContainer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"filterContainer\"}},[_c('div',{attrs:{\"id\":\"filterWrapper\"}},[_c('button',{on:{\"click\":_vm.resetChecked}},[_vm._v(\"Reset\")]),_c('span',[_vm._v(\"Filter routes\")]),_vm._l((_vm.allRoutes),function(route,index){return [_c('div',{staticClass:\"checkboxContainer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkedValues),expression:\"checkedValues\"}],attrs:{\"type\":\"checkbox\",\"id\":_vm.idString(index)},domProps:{\"value\":route,\"checked\":Array.isArray(_vm.checkedValues)?_vm._i(_vm.checkedValues,route)>-1:(_vm.checkedValues)},on:{\"change\":function($event){var $$a=_vm.checkedValues,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=route,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checkedValues=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checkedValues=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checkedValues=$$c}}}}),_c('label',{attrs:{\"for\":_vm.idString(index)}},[_vm._v(_vm._s(route))])])]})],2)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e89bee2\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/FilterContainer.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e89bee2\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FilterContainer.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FilterContainer.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FilterContainer.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e89bee2\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FilterContainer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2e89bee2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/FilterContainer.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport MapContainer from './components/MapContainer.vue'\nimport FilterContainer from './components/FilterContainer.vue'\n\nexport default Vue.extend({\n  name: 'app',\n  components: {\n    MapContainer,\n    FilterContainer\n  },\n  data () {\n    return {\n      checkedValues: [],\n      vehicleData: []\n    }\n  },\n  async created () {\n    this.getvehicleData(true)\n    // schedule vehicle data fetching every 3 seconds\n    window.setInterval(this.getvehicleData, 3000)\n  },\n  computed: {\n    allRoutes () {\n      const allRoutes:String[] = []\n      for (let i = 0; i < this.vehicleData.length; i++) {\n        if(!allRoutes.includes(this.vehicleData[i].properties.routeTag)){\n          allRoutes.push(this.vehicleData[i].properties.routeTag)\n        }\n      }\n      return allRoutes.sort()\n    }\n  },\n  methods: {\n    async getvehicleData(firstRun:boolean = false) {\n      const vehicleRequest = await fetch(`https://cors-anywhere.herokuapp.com/http://webservices.nextbus.com/service/publicJSONFeed?command=vehicleLocations&a=sf-muni&t=${firstRun ? 0 : Date.now() - 15000}`)\n      const vehicleJSON = await vehicleRequest.json()\n      const currentIds = this.vehicleData.map(d=>d.properties.id)\n      for (let i = 0; i < vehicleJSON.vehicle.length; i++) {\n        if(!currentIds.includes(vehicleJSON.vehicle[i].id)) {\n          this.vehicleData.push(this.getvehicleObject(vehicleJSON.vehicle[i]))\n        } else {\n          const updatingIndex = this.vehicleData.findIndex((d) => {\n            return d.properties.id === vehicleJSON.vehicle[i].id\n          })\n          this.updatevehicle(vehicleJSON.vehicle[i], updatingIndex)\n        }\n      }\n    },\n    getvehicleObject (vehicle:object) {\n      return {\n        coordinates: [vehicle.lon, vehicle.lat],\n        properties: {\n          id: vehicle.id,\n          routeTag: vehicle.routeTag,\n          secsSinceReport: vehicle.secsSinceReport,\n          speedKmHr: vehicle.speedKmHr,\n          heading: vehicle.heading\n        }\n      }\n    },\n    updatevehicle (vehicle:object, updatingIndex:number) {\n      Vue.set(this.vehicleData[updatingIndex], 'coordinates', [vehicle.lon, vehicle.lat])\n      Vue.set(this.vehicleData[updatingIndex].properties, 'secsSinceReport', vehicle.secsSinceReport)\n      Vue.set(this.vehicleData[updatingIndex].properties, 'speedKmHr', vehicle.speedKmHr)\n      Vue.set(this.vehicleData[updatingIndex].properties, 'heading', vehicle.heading)\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('MapContainer',{attrs:{\"vehicleData\":_vm.vehicleData,\"checkedValues\":_vm.checkedValues}}),_c('FilterContainer',{attrs:{\"allRoutes\":_vm.allRoutes},on:{\"change\":function (val) { return this$1.checkedValues = val; }}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ff3e9556\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ff3e9556\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount('#app');\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}