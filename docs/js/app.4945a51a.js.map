{"version":3,"sources":["webpack:///./src/components/MapContainer.vue?10a6","webpack:///./src/components/MapContainer.vue?bdd9","webpack:///./src/components/MapContainer.vue","webpack:///./src/components/FilterContainer.vue?03e6","webpack:///./src/components/FilterContainer.vue?cc4e","webpack:///./src/components/FilterContainer.vue","webpack:///./src/App.vue?eb80","webpack:///./src/App.vue?bfdf","webpack:///./src/App.vue","webpack:///./src/main.ts"],"names":["_debounce","__webpack_require__","MapContainer","vue_runtime_esm","extend","name","props","data","geojsonData","zoom","undefined","zoomScale","created","this","features","type","fetch","exam1","_context","sent","can_ndjson_stream_default","body","exam2","reader","getReader","read","result","done","push","value","mounted","panzoom_default","document","getElementById","maxZoom","minZoom","beforeWheel","_this","setZoomScale","map","addEventListener","methods","getTransform","scale","computed","pathFunction","Object","d3_geo","projection","center","translate","$el","clientWidth","clientHeight","emojiSize","d3_scale","domain","range","vehicleStyle","font-size","concat","MapContainer_render","_vm","_h","$createElement","_c","_self","attrs","id","_l","feature","class","d","style","vehicle","checkedValues","length","includes","properties","routeTag","Number","parseInt","x","coordinates","y","route","_v","_s","_e","staticRenderFns","injectStyle","context","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","component_normalizer","components_MapContainer","FilterContainer","idString","resetChecked","Array","from","querySelectorAll","forEach","element","checked","watch","newVal","oldVal","$emit","FilterContainer_render","on","click","index","staticClass","directives","rawName","expression","domProps","isArray","_i","change","$event","$$a","$$el","target","$$c","$$v","$$i","slice","for","FilterContainer_staticRenderFns","FilterContainer_injectStyle","FilterContainer___vue_template_functional__","FilterContainer___vue_styles__","FilterContainer___vue_scopeId__","FilterContainer___vue_module_identifier__","FilterContainer_Component","components_FilterContainer","App","components","vehicleData","getvehicleData","window","setInterval","allRoutes","i","sort","firstRun","arguments","Date","now","vehicleRequest","_context2","json","vehicleJSON","currentIds","updatingIndex","findIndex","updatevehicle","getvehicleObject","_loop","lon","lat","secsSinceReport","speedKmHr","heading","set","App_render","this$1","val","App_staticRenderFns","App_injectStyle","App___vue_template_functional__","App___vue_styles__","App___vue_scopeId__","App___vue_module_identifier__","App_Component","src_App","config","productionTip","render","h","$mount"],"mappings":"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","file":"js/app.4945a51a.js","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\"\nimport { geoPath, geoMercator } from 'd3-geo'\nimport { scaleLog } from 'd3-scale'\nimport panzoom from 'panzoom'\nconst _debounce = require('lodash.debounce')\nimport ndjsonStream from 'can-ndjson-stream';\n\nexport default Vue.extend({\n  name: \"MapContainer\",\n  props: ['vehicleData', 'checkedValues'],\n  data() {\n    return {\n      geojsonData: {},\n      zoom: undefined,\n      zoomScale: undefined\n    }\n  },\n  async created () {\n    // get the map files\n    //const geojsonFile = await fetch(\"../streets.json\")\n    this.geojsonData.features = []\n    this.geojsonData.type = \"FeatureCollection\"\n    const exam1 = await fetch(\"../streets.ndjson\")\n    const exam2 = await ndjsonStream(exam1.body)\n    const reader = exam2.getReader();\n    while(true){\n      const result = await reader.read()\n      if (result.done) { break }\n      this.geojsonData.features.push(result.value)\n    }\n  },\n  mounted() {\n    // handle zooming\n    this.zoom = panzoom(document.getElementById('panZoomRoot'), {\n      maxZoom: 10,\n      minZoom: 1,\n      beforeWheel: _debounce(()=>{this.setZoomScale()}, 60)\n    })\n    this.setZoomScale()\n    const map = document.getElementById('map')\n    map.addEventListener('dblclick', this.setZoomScale)\n    map.addEventListener('touchstart', _debounce(()=>{this.setZoomScale()}, 60))\n    map.addEventListener('keydown', _debounce(()=>{this.setZoomScale()}, 60))\n  },\n  methods: {\n    setZoomScale () {\n      this.zoomScale = this.zoom.getTransform().scale\n    }\n  },\n  computed: {\n    pathFunction() {\n      return geoPath(this.projection)\n    },\n    projection () {\n      return geoMercator()\n        .scale(306337.6140209504)\n        .center([-122.43595722806097, 37.77071992617303]) //projection center\n        .translate([this.$el.clientWidth / 2, this.$el.clientHeight / 2])\n    },\n    emojiSize () {\n      return scaleLog().domain([1,10]).range([12,2])\n    },\n    vehicleStyle () {\n      if (this.zoom === undefined) return '15px'\n      return {\n        'font-size': `${this.emojiSize(this.zoomScale)}px` \n      }\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MapContainer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"id\":\"map\"}},[_c('g',{attrs:{\"id\":\"panZoomRoot\"}},[_c('g',{attrs:{\"id\":\"mapPaths\"}},[_vm._l((_vm.geojsonData.features),function(feature){return [_c('path',{class:feature.type,attrs:{\"d\":_vm.pathFunction(feature)}})]})],2),_c('g',{style:(_vm.vehicleStyle)},[_vm._l((_vm.vehicleData),function(vehicle){return [(_vm.checkedValues.length === 0 || _vm.checkedValues.includes(vehicle.properties.routeTag))?[_c('text',{class:Number.parseInt(vehicle.properties.routeTag) ? 'bus' : 'trolley',attrs:{\"x\":_vm.projection(vehicle.coordinates)[0],\"y\":_vm.projection(vehicle.coordinates)[1],\"route\":vehicle.properties.routeTag}},[_vm._v(_vm._s(Number.parseInt(vehicle.properties.routeTag) ? '🚌' : '🚋'))])]:_vm._e()]})],2)])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-07819959\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MapContainer.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-07819959\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MapContainer.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapContainer.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapContainer.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-07819959\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MapContainer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-07819959\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MapContainer.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\"\n\nexport default Vue.extend({\n  name: \"FilterContainer\",\n  props: ['allRoutes'],\n  data () {\n    return {\n      checkedValues: []\n    }\n  },\n  methods: {\n    idString (id) {\n      return `route-${id}`\n    },\n    resetChecked () {\n      this.checkedValues = []\n      Array.from(document.querySelectorAll('input[type=checkbox]')).forEach(element => {\n        element.checked = false\n      });\n    }\n  },\n  watch: {\n    checkedValues (newVal, oldVal) {\n      this.$emit('change', newVal)\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/FilterContainer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"filterContainer\"}},[_c('div',{attrs:{\"id\":\"filterWrapper\"}},[_c('button',{on:{\"click\":_vm.resetChecked}},[_vm._v(\"Reset\")]),_c('span',[_vm._v(\"Filter routes\")]),_vm._l((_vm.allRoutes),function(route,index){return [_c('div',{staticClass:\"checkboxContainer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkedValues),expression:\"checkedValues\"}],attrs:{\"type\":\"checkbox\",\"id\":_vm.idString(index)},domProps:{\"value\":route,\"checked\":Array.isArray(_vm.checkedValues)?_vm._i(_vm.checkedValues,route)>-1:(_vm.checkedValues)},on:{\"change\":function($event){var $$a=_vm.checkedValues,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=route,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checkedValues=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checkedValues=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checkedValues=$$c}}}}),_c('label',{attrs:{\"for\":_vm.idString(index)}},[_vm._v(_vm._s(route))])])]})],2)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e89bee2\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/FilterContainer.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e89bee2\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FilterContainer.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FilterContainer.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FilterContainer.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e89bee2\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FilterContainer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2e89bee2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/FilterContainer.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport MapContainer from './components/MapContainer.vue'\nimport FilterContainer from './components/FilterContainer.vue'\n\nexport default Vue.extend({\n  name: 'app',\n  components: {\n    MapContainer,\n    FilterContainer\n  },\n  data () {\n    return {\n      checkedValues: [],\n      vehicleData: []\n    }\n  },\n  async created () {\n    this.getvehicleData(true)\n    // schedule vehicle data fetching every 3 seconds\n    window.setInterval(this.getvehicleData, 3000)\n  },\n  computed: {\n    allRoutes () {\n      const allRoutes:String[] = []\n      for (let i = 0; i < this.vehicleData.length; i++) {\n        if(!allRoutes.includes(this.vehicleData[i].properties.routeTag)){\n          allRoutes.push(this.vehicleData[i].properties.routeTag)\n        }\n      }\n      return allRoutes.sort()\n    }\n  },\n  methods: {\n    async getvehicleData(firstRun:boolean = false) {\n      const vehicleRequest = await fetch(`http://webservices.nextbus.com/service/publicJSONFeed?command=vehicleLocations&a=sf-muni&t=${firstRun ? 0 : Date.now() - 15000}`)\n      const vehicleJSON = await vehicleRequest.json()\n      const currentIds = this.vehicleData.map(d=>d.properties.id)\n      for (let i = 0; i < vehicleJSON.vehicle.length; i++) {\n        if(!currentIds.includes(vehicleJSON.vehicle[i].id)) {\n          this.vehicleData.push(this.getvehicleObject(vehicleJSON.vehicle[i]))\n        } else {\n          const updatingIndex = this.vehicleData.findIndex((d) => {\n            return d.properties.id === vehicleJSON.vehicle[i].id\n          })\n          this.updatevehicle(vehicleJSON.vehicle[i], updatingIndex)\n        }\n      }\n    },\n    getvehicleObject (vehicle:object) {\n      return {\n        coordinates: [vehicle.lon, vehicle.lat],\n        properties: {\n          id: vehicle.id,\n          routeTag: vehicle.routeTag,\n          secsSinceReport: vehicle.secsSinceReport,\n          speedKmHr: vehicle.speedKmHr,\n          heading: vehicle.heading\n        }\n      }\n    },\n    updatevehicle (vehicle:object, updatingIndex:number) {\n      Vue.set(this.vehicleData[updatingIndex], 'coordinates', [vehicle.lon, vehicle.lat])\n      Vue.set(this.vehicleData[updatingIndex].properties, 'secsSinceReport', vehicle.secsSinceReport)\n      Vue.set(this.vehicleData[updatingIndex].properties, 'speedKmHr', vehicle.speedKmHr)\n      Vue.set(this.vehicleData[updatingIndex].properties, 'heading', vehicle.heading)\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('MapContainer',{attrs:{\"vehicleData\":_vm.vehicleData,\"checkedValues\":_vm.checkedValues}}),_c('FilterContainer',{attrs:{\"allRoutes\":_vm.allRoutes},on:{\"change\":function (val) { return this$1.checkedValues = val; }}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71152b54\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71152b54\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount('#app');\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}