{"version":3,"sources":["webpack:///./src/components/Vehicle.vue?66a6","webpack:///./src/components/Vehicle.vue?9519","webpack:///./src/components/Vehicle.vue","webpack:///./src/components/MapContainer.vue?10a6","webpack:///./src/components/MapContainer.vue?cad4","webpack:///./src/components/MapContainer.vue","webpack:///./src/components/FilterContainer.vue?03e6","webpack:///./src/components/FilterContainer.vue?cf35","webpack:///./src/components/FilterContainer.vue","webpack:///./src/App.vue?eb80","webpack:///./src/App.vue?9312","webpack:///./src/App.vue","webpack:///./src/main.ts"],"names":["vue_runtime_esm","extend","name","props","data","xPosition","yPosition","created","this","xComputed","yComputed","watch","newVal","oldVal","update","tweenedVal","Object","values","tweenFrom","pop","tweenTo","onUpdate","ease","TweenMax","easeOut","onUpdateScope","to","computed","styleObject","display","checkedValues","length","includes","vehicle","properties","routeTag","projection","coordinates","Vehicle_render","_vm","_h","$createElement","_c","_self","class","Number","parseInt","style","attrs","x","y","route","_v","_s","staticRenderFns","injectStyle","context","__webpack_require__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","component_normalizer","Vehicle","components_Vehicle","_debounce","MapContainer","components","geojsonData","zoom","undefined","zoomScale","features","type","fetch","geojsonFile","_context","sent","can_ndjson_stream_default","body","fileStream","reader","getReader","mapPaths","document","getElementById","read","result","done","newPath","createElementNS","setAttributeNS","String","pathFunction","value","geometry","appendChild","mounted","zoomRoot","panzoom_default","maxZoom","minZoom","beforeWheel","_this","setZoomScale","map","addEventListener","methods","getTransform","scale","d3_geo","center","translate","$el","clientWidth","clientHeight","emojiSize","d3_scale","domain","range","vehicleStyle","font-size","concat","MapContainer_render","id","_l","key","MapContainer_staticRenderFns","MapContainer_injectStyle","MapContainer___vue_template_functional__","MapContainer___vue_styles__","MapContainer___vue_scopeId__","MapContainer___vue_module_identifier__","MapContainer_Component","components_MapContainer","FilterContainer","idString","resetChecked","Array","from","querySelectorAll","forEach","element","checked","$emit","FilterContainer_render","on","click","index","staticClass","directives","rawName","expression","domProps","isArray","_i","change","$event","$$a","$$el","target","$$c","$$v","$$i","slice","for","FilterContainer_staticRenderFns","FilterContainer_injectStyle","FilterContainer___vue_template_functional__","FilterContainer___vue_styles__","FilterContainer___vue_scopeId__","FilterContainer___vue_module_identifier__","FilterContainer_Component","components_FilterContainer","App","vehicleData","getvehicleData","window","setInterval","allRoutes","i","push","sort","firstRun","arguments","Date","now","vehicleRequest","_context2","json","vehicleJSON","currentIds","d","updatingIndex","findIndex","updatevehicle","getvehicleObject","_loop","lon","lat","secsSinceReport","speedKmHr","heading","set","App_render","this$1","val","App_staticRenderFns","App_injectStyle","App___vue_template_functional__","App___vue_styles__","App___vue_scopeId__","App___vue_module_identifier__","App_Component","src_App","config","productionTip","render","h","$mount"],"mappings":"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","file":"js/app.ab74ade5.js","sourcesContent":["\n\n\n\n\nimport Vue from \"vue\"\nimport {TweenMax, Power1} from 'gsap'\n\nexport default Vue.extend({\n  name: \"MapContainer\",\n  props: ['checkedValues', 'vehicle', 'projection'],\n  data () {\n    return {\n      xPosition: <Number>0,\n      yPosition: <Number>0\n    }\n  },\n  created () {\n    this.xPosition = this.xComputed\n    this.yPosition = this.yComputed\n  },\n  watch: {\n    xComputed (newVal, oldVal) {\n      const update = function () {\n        let tweenedVal = (<any>Object).values(tweenFrom)\n        tweenedVal.pop()\n        this.xPosition = tweenedVal[0]\n      }\n      let tweenFrom = {}\n      let tweenTo = {onUpdate: update, ease: Power1.easeOut, onUpdateScope: this}\n      tweenFrom[0] = oldVal\n      tweenTo[0] = newVal\n      TweenMax.to(tweenFrom, 2, tweenTo)\n    },\n    yComputed (newVal, oldVal) {\n      const update = function () {\n        let tweenedVal = (<any>Object).values(tweenFrom)\n        tweenedVal.pop()\n        this.yPosition = tweenedVal[0]\n      }\n      let tweenFrom = {}\n      let tweenTo = {onUpdate: update, ease: Power1.easeOut, onUpdateScope: this}\n      tweenFrom[0] = oldVal\n      tweenTo[0] = newVal\n      TweenMax.to(tweenFrom, 2, tweenTo)\n    }\n  },\n  computed: {\n    styleObject ():object {\n      return {\n        display: this.checkedValues.length === 0 || this.checkedValues.includes(this.vehicle.properties.routeTag) ? 'block' : 'none'\n      }\n    },\n    xComputed ():Number {\n      return this.projection(this.vehicle.coordinates)[0]\n    },\n    yComputed ():Number {\n      return this.projection(this.vehicle.coordinates)[1]\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/Vehicle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('text',{class:Number.parseInt(_vm.vehicle.properties.routeTag) ? 'bus' : 'trolley',style:(_vm.styleObject),attrs:{\"x\":_vm.xPosition,\"y\":_vm.yPosition,\"route\":_vm.vehicle.properties.routeTag}},[_vm._v(_vm._s(Number.parseInt(_vm.vehicle.properties.routeTag) ? 'ðŸšŒ' : 'ðŸš‹'))])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-48e6443e\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Vehicle.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Vehicle.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Vehicle.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Vehicle.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-48e6443e\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Vehicle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Vehicle.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\"\nimport Vehicle from './Vehicle.vue'\nimport { geoPath, geoMercator } from 'd3-geo'\nimport { scaleLog } from 'd3-scale'\nimport panzoom from 'panzoom'\nconst _debounce = require('lodash.debounce')\nimport ndjsonStream from 'can-ndjson-stream'\n\nexport default Vue.extend({\n  name: \"MapContainer\",\n  props: ['vehicleData', 'checkedValues'],\n  components: { Vehicle },\n  data() {\n    return {\n      geojsonData: <any> {},\n      zoom: <any> undefined,\n      zoomScale: <any> undefined \n    }\n  },\n  async created () {\n    // get the map file\n    this.geojsonData.features = []\n    this.geojsonData.type = \"FeatureCollection\"\n    const geojsonFile = await fetch(\"./all.ndjson\")\n    const fileStream = await ndjsonStream(geojsonFile.body)\n    const reader = fileStream.getReader();\n    const mapPaths = document.getElementById('mapPaths')\n    \n    let result = await reader.read()\n    while(!result.done) {\n      const newPath = document.createElementNS('http://www.w3.org/2000/svg','path')\n      newPath.setAttributeNS(null, 'd', String(this.pathFunction(result.value)))\n      newPath.setAttributeNS(null, 'type', result.value.geometry.type)\n      if (mapPaths) {\n        mapPaths.appendChild(newPath)\n      }\n      result = await reader.read()\n    } \n  },\n  mounted() {\n    // handle zooming\n    const zoomRoot = document.getElementById('panZoomRoot')\n    if(zoomRoot) {\n      this.zoom = panzoom(zoomRoot, {\n        maxZoom: 10,\n        minZoom: 1,\n        beforeWheel: _debounce(()=>{this.setZoomScale()}, 60)\n      })\n      this.setZoomScale()\n    }\n    \n    const map = document.getElementById('map')\n    if (map) { \n      map.addEventListener('dblclick', this.setZoomScale)\n      map.addEventListener('touchstart', _debounce(()=>{this.setZoomScale()}, 60))\n      map.addEventListener('keydown', _debounce(()=>{this.setZoomScale()}, 60))\n    } \n  },\n  methods: {\n    setZoomScale () {\n      this.zoomScale = this.zoom.getTransform().scale\n    }\n  },\n  computed: {\n    pathFunction() {\n      return geoPath(this.projection)\n    },\n    projection ():Number {\n      return geoMercator()\n        .scale(306337.6140209504)\n        .center([-122.43595722806097, 37.77071992617303]) //projection center\n        .translate([this.$el.clientWidth / 2, this.$el.clientHeight / 2])\n    },\n    emojiSize () {\n      return scaleLog().domain([1,10]).range([12,2])\n    },\n    vehicleStyle ():Object {\n      if (this.zoom === undefined) return { 'font-size': '15px' }\n      return { 'font-size': `${this.emojiSize(this.zoomScale)}px` }\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/MapContainer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"id\":\"map\"}},[_c('g',{attrs:{\"id\":\"panZoomRoot\"}},[_c('g',{attrs:{\"id\":\"mapPaths\"}}),_c('g',{style:(_vm.vehicleStyle),attrs:{\"id\":\"vehicleRoot\"}},[_vm._l((_vm.vehicleData),function(vehicle){return [_c('Vehicle',{key:vehicle.properties.id,attrs:{\"checkedValues\":_vm.checkedValues,\"vehicle\":vehicle,\"projection\":_vm.projection}})]})],2)])])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-02442c1b\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/MapContainer.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MapContainer.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapContainer.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MapContainer.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-02442c1b\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MapContainer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/MapContainer.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\"\n\nexport default Vue.extend({\n  name: \"FilterContainer\",\n  props: ['allRoutes'],\n  data () {\n    return {\n      checkedValues: []\n    }\n  },\n  methods: {\n    idString (id:number) {\n      return `route-${id}`\n    },\n    resetChecked () {\n      this.checkedValues = []\n      Array.from(document.querySelectorAll('input[type=checkbox]')).forEach((element:any) => {\n        element.checked = false\n      });\n    }\n  },\n  watch: {\n    checkedValues (newVal, oldVal) {\n      this.$emit('change', newVal)\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/FilterContainer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"filterContainer\"}},[_c('div',{attrs:{\"id\":\"filterWrapper\"}},[_c('button',{on:{\"click\":_vm.resetChecked}},[_vm._v(\"Reset\")]),_c('span',[_vm._v(\"Filter routes\")]),_vm._l((_vm.allRoutes),function(route,index){return [_c('div',{key:route,staticClass:\"checkboxContainer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkedValues),expression:\"checkedValues\"}],attrs:{\"type\":\"checkbox\",\"id\":_vm.idString(index)},domProps:{\"value\":route,\"checked\":Array.isArray(_vm.checkedValues)?_vm._i(_vm.checkedValues,route)>-1:(_vm.checkedValues)},on:{\"change\":function($event){var $$a=_vm.checkedValues,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=route,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checkedValues=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checkedValues=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checkedValues=$$c}}}}),_c('label',{attrs:{\"for\":_vm.idString(index)}},[_vm._v(_vm._s(route))])])]})],2)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b9d6aede\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/FilterContainer.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b9d6aede\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FilterContainer.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FilterContainer.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FilterContainer.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b9d6aede\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FilterContainer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b9d6aede\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/FilterContainer.vue\n// module id = null\n// module chunks = ","\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport MapContainer from './components/MapContainer.vue'\nimport FilterContainer from './components/FilterContainer.vue'\n\ninterface VehicleJSON {\n  dirTag: string,\n  heading: string,\n  id: string,\n  lon: string,\n  lat: string,\n  predictable: string,\n  routeTag: string,\n  secsSinceReport: string,\n  speedKmHr: string\n}\n\ninterface VehicleData {\n  coordinates: Array<number>,\n  properties: object\n}\n\nexport default Vue.extend({\n  name: 'app',\n  components: {\n    MapContainer,\n    FilterContainer\n  },\n  data () {\n    return {\n      checkedValues: [],\n      vehicleData: []\n    }\n  },\n  async created () {\n    this.getvehicleData(true)\n    // schedule vehicle data fetching every 3 seconds\n    window.setInterval(this.getvehicleData, 3000)\n  },\n  computed: {\n    allRoutes () {\n      const allRoutes:Array<string> = []\n      for (let i = 0; i < this.vehicleData.length; i++) {\n        if(!allRoutes.includes(this.vehicleData[i].properties.routeTag)){\n          allRoutes.push(this.vehicleData[i].properties.routeTag)\n        }\n      }\n      return allRoutes.sort()\n    }\n  },\n  methods: {\n    async getvehicleData(firstRun:boolean = false) {\n      const vehicleRequest = await fetch(`https://cors-anywhere.herokuapp.com/http://webservices.nextbus.com/service/publicJSONFeed?command=vehicleLocations&a=sf-muni&t=${firstRun ? 0 : Date.now() - 15000}`)\n      const vehicleJSON = await vehicleRequest.json()\n      const currentIds = this.vehicleData.map(d=>d.properties.id)\n      for (let i = 0; i < vehicleJSON.vehicle.length; i++) {\n        if(!currentIds.includes(vehicleJSON.vehicle[i].id)) {\n          this.vehicleData.push(this.getvehicleObject(vehicleJSON.vehicle[i]))\n        } else {\n          const updatingIndex = this.vehicleData.findIndex((d) => {\n            return d.properties.id === vehicleJSON.vehicle[i].id\n          })\n          this.updatevehicle(vehicleJSON.vehicle[i], updatingIndex)\n        }\n      }\n    },\n    getvehicleObject (vehicle:VehicleJSON) {\n      return {\n        coordinates: [vehicle.lon, vehicle.lat],\n        properties: {\n          id: vehicle.id,\n          routeTag: vehicle.routeTag,\n          secsSinceReport: vehicle.secsSinceReport,\n          speedKmHr: vehicle.speedKmHr,\n          heading: vehicle.heading\n        }\n      }\n    },\n    updatevehicle (vehicle:VehicleJSON, updatingIndex:number) {\n      Vue.set(this.vehicleData[updatingIndex], 'coordinates', [vehicle.lon, vehicle.lat])\n      Vue.set(this.vehicleData[updatingIndex].properties, 'secsSinceReport', vehicle.secsSinceReport)\n      Vue.set(this.vehicleData[updatingIndex].properties, 'speedKmHr', vehicle.speedKmHr)\n      Vue.set(this.vehicleData[updatingIndex].properties, 'heading', vehicle.heading)\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/App.vue","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('MapContainer',{attrs:{\"vehicleData\":_vm.vehicleData,\"checkedValues\":_vm.checkedValues}}),_c('FilterContainer',{attrs:{\"allRoutes\":_vm.allRoutes},on:{\"change\":function (val) { return this$1.checkedValues = val; }}})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-483c2422\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/Users/adityajain/Desktop/Work/sfmuni/node_modules/.cache/cache-loader\\\"}!babel-loader!ts-loader?{\\\"transpileOnly\\\":true,\\\"appendTsSuffixTo\\\":[{}],\\\"happyPackMode\\\":false}!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-483c2422\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport App from './App.vue';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount('#app');\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}